{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\Downloads\\\\Compressed\\\\nmCNPM-main\\\\nmCNPM-main\\\\lirvecafe\\\\src\\\\frontend\\\\components\\\\createBill\\\\bill.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport useStyles from './styles';\nimport BillItem from './billItem/billItem';\nimport { useEffect } from 'react';\nimport * as isSignined from '../constants/isSignined';\nimport { getCookie, deleteCookie } from \"../constants/userCookie\";\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Bill = () => {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [change, setChange] = useState(0);\n  let signined = getCookie(isSignined.customer);\n  let user = getCookie('customer');\n\n  if (user) {\n    user = JSON.parse(user);\n  } else {\n    user = {};\n  }\n\n  const id = user.id;\n\n  const axios = require('axios');\n\n  const handleAddToCart = (itemId, price) => {\n    const temp = {\n      cartId: user.id,\n      productId: itemId,\n      price: price\n    };\n    axios({\n      method: 'PUT',\n      url: \"http://localhost:5000/cart/addToCart\",\n      data: temp\n    }).then(res => {\n      setChange(change + 1);\n      console.log(res);\n    });\n    console.log(temp);\n  };\n\n  const handleRemoveFromCart = itemId => {\n    const temp = {\n      cartId: id,\n      productId: itemId\n    };\n    axios({\n      method: 'PUT',\n      url: \"http://localhost:5000/cart/deleteFromCart\",\n      data: temp\n    }).then(res => {\n      setChange(change + 1);\n      console.log(res);\n    });\n    console.log(temp);\n  };\n\n  useEffect(() => {\n    const getCart = async () => {\n      const url = 'http://localhost:5000/cart/get/' + id;\n      const res = await (await fetch(url)).json();\n      setItems(res);\n    };\n\n    getCart();\n  }, [change]);\n  console.log(items);\n  const classes = useStyles();\n  const [total, setTotal] = useState();\n  useEffect(() => {\n    fetch('http://localhost:5000/cart/get_total/' + id).then(response => response.json()).then(total => {\n      setTotal(total);\n    });\n  }, [change]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.cart,\n    children: [items.map(item => /*#__PURE__*/_jsxDEV(BillItem, {\n      item: item,\n      addToCart: handleAddToCart,\n      removeFromCart: handleRemoveFromCart\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.total,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: classes.totalText,\n        children: \"T\\u1ED5ng c\\u1ED9ng:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: classes.totalPrice,\n        children: [total || 0, \"VN\\u0110\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Bill, \"W9yHwpqllHhZJUAoGaPsn4eTGN4=\", false, function () {\n  return [useStyles];\n});\n\n_c = Bill;\nexport default Bill;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bill\");","map":{"version":3,"sources":["C:/Users/Asus/Downloads/Compressed/nmCNPM-main/nmCNPM-main/lirvecafe/src/frontend/components/createBill/bill.jsx"],"names":["React","useStyles","BillItem","useEffect","isSignined","getCookie","deleteCookie","useState","Bill","items","setItems","change","setChange","signined","customer","user","JSON","parse","id","axios","require","handleAddToCart","itemId","price","temp","cartId","productId","method","url","data","then","res","console","log","handleRemoveFromCart","getCart","fetch","json","classes","total","setTotal","response","cart","map","item","totalText","totalPrice"],"mappings":"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","sourcesContent":["import React from 'react';\nimport useStyles from './styles';\nimport BillItem from './billItem/billItem';\nimport {useEffect} from 'react';\nimport * as isSignined from '../constants/isSignined';\nimport {getCookie, deleteCookie} from \"../constants/userCookie\";\nimport {useState} from 'react';\n\nconst Bill = () => {\n    const [items, setItems] = useState([]);\n    const [change, setChange] = useState(0);\n    let signined = getCookie(isSignined.customer);\n    let user = getCookie('customer');\n    if (user) {\n        user = JSON.parse(user);\n    } else {\n        user = {}\n    }\n    const id = user.id;\n    const axios = require('axios');\n    const handleAddToCart = ((itemId, price) => {\n        const temp = {cartId: user.id, productId: itemId, price: price};\n        axios({\n            method: 'PUT',\n            url: \"http://localhost:5000/cart/addToCart\",\n            data: temp,\n        }).then(res => {\n            setChange(change+1);\n            console.log(res);\n        });\n        console.log(temp);\n\n    });\n    const handleRemoveFromCart = ((itemId) => {\n        const temp = {cartId: id, productId: itemId};\n        axios({\n            method: 'PUT',\n            url: \"http://localhost:5000/cart/deleteFromCart\",\n            data: temp,\n        }).then(res => {\n            setChange(change+1);\n            console.log(res);\n        });\n        console.log(temp);\n    });\n    useEffect(() => {\n        const getCart = async () => {\n            const url = 'http://localhost:5000/cart/get/' + id;\n            const res = await (await (fetch(url\n            ))).json();\n            setItems(res);\n        }\n        getCart();\n    }, [change]);\n    console.log(items);\n\n    const classes = useStyles();\n\n    const [total, setTotal] = useState();\n\n    useEffect(() => {\n        fetch('http://localhost:5000/cart/get_total/' + id)\n            .then(response => response.json())\n            .then(total => {\n                setTotal(total);\n            })\n    }, [change])\n\n\n    return (\n        <div className={classes.cart}>\n            \n            {items.map(item => (\n                <BillItem item={item} addToCart={handleAddToCart} removeFromCart={handleRemoveFromCart}/>\n            ))}\n\n            <div className={classes.total}>\n                <span className={classes.totalText}>Tổng cộng:</span>\n                <span className={classes.totalPrice}>{total || 0}VNĐ</span>\n            </div>\n        </div>\n\n    )\n}\n\nexport default Bill;"]},"metadata":{},"sourceType":"module"}